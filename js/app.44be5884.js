(function(e){function t(t){for(var i,a,s=t[0],u=t[1],c=t[2],l=0,p=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={app:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("TradingVue")],1)},o=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("trading-vue",{ref:"tradingVue",attrs:{data:this.$data,width:this.width,height:this.height}})},s=[],u=(n("e9c4"),n("d3b7"),n("159b"),n("0042")),c=n.n(u),d="localdb",l="1.0",p="Web SQL Database",f=2097152,h=openDatabase(d,l,p,f);h.transaction((function(e){e.executeSql("DROP TABLE IF EXISTS trade;"),e.executeSql("CREATE TABLE IF NOT EXISTS trade (id INTEGER, price INTEGER, side TEXT, size INTEGER, timestamp TEXT);")}));var m=new WebSocket("wss://stream.bybit.com/realtime");function g(e){console.log("TradingVue: onMessage");var t=JSON.parse(e.data);"trade.BTCUSD"==t.topic&&t.data.forEach((function(e){h.transaction((function(t){return t.executeSql("INSERT INTO trade (id, price, side, size, timestamp) VALUES (?, ?, ?, ?, ?)",[e.cross_seq,e.price,e.side,e.size,e.timestamp])}))}))}m.addEventListener("open",(function(){console.log("TradingVue: addEventListener(open)"),m.send(JSON.stringify({op:"subscribe",args:["trade"]}))})),m.addEventListener("message",g);var v={name:"app",components:{TradingVue:c.a},data:function(){return{ohlcv:[],width:window.innerWidth,height:window.innerHeight}},mounted:function(){console.log("TradingVue: mounted"),window.addEventListener("resize",this.onResize),this.onResize(),this.$refs.tradingVue.resetChart(),setInterval(this.fetchEventsList,1e3)},methods:{onResize:function(){this.width=window.innerWidth,this.height=window.innerHeight-3},fetchEventsList:function(){var e=[];h.transaction((function(t){t.executeSql("SELECT     timestamp     , (SELECT price FROM trade WHERE id = min_id) AS open     , high     , low     , (SELECT price FROM trade WHERE id = max_id) AS close     , volume FROM     (         SELECT             timestamp             , MAX(id) AS max_id             , MIN(id) AS min_id             , MAX(price) AS high             , MIN(price) AS low             , ROUND(SUM(size), 2) AS volume         FROM             trade         GROUP BY             strftime('%Y%m%d%H%M', timestamp)     ); ",[],(function(t,n){for(var i=0;i<n.rows.length;i++){var r=new Date(n.rows.item(i).timestamp),o=new Date(r.getFullYear(),r.getMonth(),r.getDay(),r.getHours(),r.getMinutes());e.push([o.getTime(),n.rows.item(i).open,n.rows.item(i).high,n.rows.item(i).low,n.rows.item(i).close,n.rows.item(i).volume])}}))})),this.ohlcv=e}}},w=v,E=n("2877"),b=Object(E["a"])(w,a,s,!1,null,null,null),S=b.exports,T={name:"App",components:{TradingVue:S}},O=T,y=(n("034f"),Object(E["a"])(O,r,o,!1,null,null,null)),M=y.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(M)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.44be5884.js.map